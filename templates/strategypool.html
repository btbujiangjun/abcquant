{% extends "base.html" %}

{% block content %}
<style>
    /* 1. å˜é‡å®šä¹‰ï¼šä¸€å¤„ä¿®æ”¹ï¼Œå…¨å±€ç”Ÿæ•ˆ */
    :root {
        --primary-color: #1890ff;
        --danger-color: #ff4d4f;
        --bg-body: #f0f2f5;
        --text-main: #262626;
        --border-color: #f0f0f0;
    }

    /* 2. å¸ƒå±€ä¼˜åŒ– */
    .container { max-width: 100%; margin: 0 auto; padding: 2px; }
    
    .section-card { 
        background: white; border-radius: 8px; 
        padding: 24px; margin-bottom: 24px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }

    /* 4. DataTables é—´è·ç¾åŒ– */
    .dataTables_wrapper .dataTables_filter, 
    .dataTables_wrapper .dataTables_length { margin-bottom: 16px !important; }
    
    table.dataTable { border: 1px solid var(--border-color) !important; border-radius: 4px; }
    table.dataTable thead th { background: #fafafa; color: #595959; font-weight: 500; border-bottom: 1px solid var(--border-color); }

    /* 5. è¡¨å•ä¼˜åŒ– */
    .form-section form { display: grid; gap: 16px; }
    
    .input-label { display: block; margin-bottom: 8px; font-size: 14px; color: #595959; font-weight: 500; }
    
    .form-control {
        width: 100%; padding: 10px 14px; border: 1px solid #d9d9d9;
        border-radius: 4px; font-size: 14px; transition: all 0.3s;
    }

    .form-control:focus { border-color: var(--primary-color); outline: none; box-shadow: 0 0 0 2px rgba(24,144,255,0.1); }

    /* é’ˆå¯¹å‚æ•°é…ç½®ä½¿ç”¨ä»£ç é£æ ¼ */
    textarea.form-control {
        font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
        background: #fafafa; color: #272727; min-height: 120px;
    }

    /* 6. æŒ‰é’®æ ·å¼ */
    .btn { cursor: pointer; border-radius: 4px; font-weight: 500; transition: 0.3s; padding: 8px 16px; border: 1px solid transparent; }
    .btn-primary { background: var(--primary-color); color: white; border-color: var(--primary-color); }
    .btn-primary:hover { background: #40a9ff; }
    .btn-del { color: var(--danger-color); font-size: 13px; }
    .btn-del:hover { text-decoration: underline; }

</style>

<div class="container">
    <h1>ğŸ² <span class="gradient-h1-title">ç­–ç•¥åº“é…ç½®ä¸­å¿ƒ</span> ğŸ¯</h1>

    <div class="section-card">
        <table id="strategy_pool_table" class="display" style="width:100%">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>æ˜¾ç¤ºåç§°</th>
                    <th>ç±»è·¯å¾„</th>
                    <th>ç½‘æ ¼å‚æ•°</th>
                    <th style="width: 60px;">æ“ä½œ</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                <tr id="row-{{ row.id }}">
                    <td>{{ row.id }}</td>
                    <td style="font-weight: 500;">{{ row.strategy_name }}</td>
                    <td><code style="color: #c41d7f;">{{ row.strategy_class }}</code></td>
                    <td><small style="color: #666;">{{ row.param_configs }}</small></td>
                    <td>
                        <span class="btn btn-del" 
                            data-id="{{ row.id }}" 
                            data-name="{{ row.strategy_name }}" 
                            style="cursor: pointer;">åˆ é™¤</span>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="section-card">
        <div class="title-container">
            <h4 style="margin: 0 0 20px 0; color: var(--primary-color);">â• æ·»åŠ æ–°ç­–ç•¥</h4>
        </div>
        <form id="addForm">
            <div>
                <label class="input-label">ç­–ç•¥æ˜¾ç¤ºåç§°</label>
                <input type="text" id="strategy_name" class="form-control" placeholder="ä¾‹å¦‚: æ³¢åŠ¨ç‡çªç ´ç­–ç•¥" required>
            </div>
            
            <div>
                <label class="input-label">ç­–ç•¥å®ç°ç±» (Python Class Path)</label>
                <input type="text" id="strategy_class" class="form-control" placeholder="backtest.strategy.YourStrategy" required>
            </div>
            
            <div>
                <label class="input-label">å‚æ•°ç½‘æ ¼ (JSON æ•°ç»„)</label>
                <textarea id="param_configs" class="form-control" placeholder='{"period": [10, 20], "multiplier": [2.0, 3.0]}' required></textarea>
            </div>
            
            <button type="submit" class="btn btn-primary" style="width: 120px; height: 44px;">å­˜å…¥ç­–ç•¥åº“</button>
        </form>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="/static/strategypool.js"></script>
{% endblock %}
